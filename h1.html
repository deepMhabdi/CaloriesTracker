<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="h1.css">
    <link rel="icon" href="./Login Page/favicon.png">
    <title>Calorie Calculator</title>
</head>
<body>


    <div class="cursor">

        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    
    <div id="container">
        <h1>Calorie Calculator</h1>
    <form id="food-form">
        <input type="text" id="food" placeholder="Enter a food" required />
        <input type="number" id="quantity" placeholder="Enter quantity" min="1" value="1" required />
        <select id="unit">
            <option value="grams">Grams</option>
            <option value="numbers">Numbers</option>
        </select>
        <button type="submit">Get Calories</button>
    </form>
    <div id="result"></div>
    </div>
    

    <script>
        const foodForm = document.getElementById("food-form");
        const foodInput = document.getElementById("food");
        const quantityInput = document.getElementById("quantity");
        const unitSelect = document.getElementById("unit");
        const resultDiv = document.getElementById("result");

        foodForm.addEventListener("submit", handleSubmit);

        async function handleSubmit(event) {
            event.preventDefault();

            const food = foodInput.value.trim();
            const quantity = quantityInput.value.trim();
            const unit = unitSelect.value;

            if (food === "") {
                alert("Please enter a food item.");
                return;
            }

            try {
                const response = await fetch(`https://api.calorieninjas.com/v1/nutrition?query=${food}`, {
                    method: "GET",
                    headers: {
                        "X-Api-Key": "kowDeoa5ZwR/cfhdDdiCKA==Isg8z5qMAJtrgDRY"
                    }
                });

                if (!response.ok) {
                    throw new Error("Network response was not ok.");
                }

                const data = await response.json();

                if (data && data.items && data.items.length > 0) {
                    const calorieInfo = data.items[0].calories;
                    const totalCalories = calculateTotalCalories(calorieInfo, quantity, unit);
                    displayResult(food, totalCalories);
                } else {
                    resultDiv.textContent = `No calorie information found for ${food}.`;
                }
            } catch (error) {
                console.error("Error:", error);
                resultDiv.textContent = `An error occurred. Please try again later.`;
            }

            foodInput.value = "";
            quantityInput.value = "1";
            unitSelect.value = "grams";
        }

        function calculateTotalCalories(caloriesPer100g, quantity, unit) {
            if (unit === "grams") {
                return ((caloriesPer100g * quantity) / 100).toFixed(2);
            } else {
                return (caloriesPer100g / quantity).toFixed(2);
            }
        }

        function displayResult(food, totalCalories) {
            resultDiv.textContent = `Total Calories in ${food}: ${totalCalories}`;
        }
    </script>
    <script src="h1.js"></script>
</body>
</html>
